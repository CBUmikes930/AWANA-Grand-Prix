<html lang="en" id="history">
<%- include("./partials/head.ejs") %>

<body>
    <div class="jumbotron text-center row" id="index_header">
        <!-- Left-side checkered flag image using an svg and polygon mask to create an angled cutoff -->
        <div class="col-md-3 header_image_container">
            <svg width="535" height="115" style="float:left">
                <mask id="svgmask1">
                    <polygon fill="#ffffff" points="0 0, 450 0, 535 115, 0 115"></polygon>
                </mask>
                <image xlink:href="<%= static %>/checkered.jpg" mask="url(#svgmask1)"></image>
            </svg>
        </div>
        <!-- Text header to display current race and group -->
        <div class="col-md-6">
            <h1 id="index_title">AWANA Grand Prix</h1>
            <p>Race History</p>
        </div>
        <!-- Right-side checkered flag image using an svg and polygon mask to create an angled cutoff -->
        <div class="col-md-3 header_image_container">
            <svg width="535" height="115" style="float:right">
                <mask id="svgmask2">
                    <polygon fill="#ffffff" points="0 0, 535 0, 535 115, 85 115"></polygon>
                </mask>
                <image xlink:href="<%= static %>/checkered.jpg" mask="url(#svgmask2)"></image>
            </svg>
        </div>
    </div>

    <div class="col-md-1"></div>

    <div class="col-md-10 text-center" id="history_table">
        <div class="row" id="super_header">
            <div class="col-md-4">&nbsp;</div>
            
            <div class="col-md-8">Results</div>
        </div>

        <div class="row" id="header">
            <div class="col-md-2">Type</div>
            <div class="col-md-1">Group</div>
            <div class="col-md-1">Number</div>
            <div class="col-md-1">1st Place</div>
            <div class="col-md-1">2nd Place</div>
            <div class="col-md-1">3rd Place</div>
            <div class="col-md-1">4th Place</div>
            <div class="col-md-1">5th Place</div>
            <div class="col-md-1">6th Place</div>
            <div class="col-md-1">7th Place</div>
            <div class="col-md-1">8th Place</div>
        </div>

        <% races.forEach((race) => { %>
            <div class="row">
                <div class="col-md-2"><strong><%= race.type %></strong></div>
                <div class="col-md-1"><%= race.group %></div>
                <div class="col-md-1"><%= race.number %></div>
            
                <% for (let i = 0; i < race.results.length; i++) { %>
                    <% let racer = race.results[i]; %>

                    <div class="col-md-1 <%= i < race.numWinners ? "winner" : "loser" %>" title="Advance to <%= i < race.numWinners ? race.raceDest.Winners : race.raceDest.Losers %>">#<%= racer.number %>: <%= racer.fname %> <%= racer.lname %></div>
                <% } %>
            </div>
        <% }) %>
    </div>
</body>
</html>